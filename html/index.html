<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <link rel="stylesheet" type="text/css" href="../css/normalize.css">
    <link rel="stylesheet" type="text/css" href="../css/header.css">
    <link rel="stylesheet" type="text/css" href="../css/footer.css">
    <link rel="stylesheet" type="text/css" href="../css/index.css">
    <link rel="stylesheet" type="text/css" href="../lib/css/bulma.css">
    <link rel="stylesheet" type="text/css" href="../lib/css/swiper.css">
</head>
<body>
    
    <div class="header-div">
    </div>
   
    <!-- slider -->
    <div class="container">
        <div class="swiper-container main-swiper">
            <div class="swiper-wrapper">
                <div class="swiper-slide">
                    <img src="../images/slider-1.png">
                </div>
                <div class="swiper-slide">
                    <img src="../images/slider-2.jpg">
                </div>
                <div class="swiper-slide">
                    <img src="../images/slider-3.jpg">
                </div>
                <div class="swiper-slide">
                    <img src="../images/slider-4.jpg">
                </div>
                <div class="swiper-slide">
                    <img src="../images/slider-5.jpg">
                </div>
                <div class="swiper-slide">
                    <img src="../images/slider-6.jpg">
                </div>
                <div class="swiper-slide">
                    <img src="../images/slider-7.jpg">
                </div>
            </div>
            <div class="swiper-pagination"></div>
        </div>
    </div>
    <!-- slider end -->

    <div class="container clearfix">
        <div class="s1">
            <div class="s1-left">
                <div class="s1-top">
                    <h3>限时抢购</h3>
                    <h4>每天优质商品</h4>
                    <div class="sl-btn">
                        <div class="sl-prev" id="sl-prev"></div>
                        <div class="sl-paginate" id="sl-paginate"></div>
                        <div class="sl-next" id="sl-next"></div>
                    </div>          
                </div>
                <div class="swiper-container left-swiper" id="left-swiper">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide">
                            <div class="sl sl-1">
                                <img src="../images/sl-1-img.jpg" alt="">
                                <div class="pro-info">
                                    <div class="pro-name">海南玲珑蜜瓜两个装</div>
                                    <div class="pro-price">
                                        <span class="current-price">¥49.9</span>
                                        <span class="old-price">¥68</span>
                                    </div>
                                </div>
                                <div class="pro-time">
                                    <div class="time-text">剩</div>
                                    <div class="time-hour time">26</div>
                                    <div class="time-text">时</div>
                                    <div class="time-minutes time">18</div>
                                    <div class="time-text">分</div>
                                    <div class="time-seconds time">36</div>
                                    <div class="time-text">秒</div>
                                </div>
                            </div>
                        </div>
                        <div class="swiper-slide">
                            <div class="sl sl-2">
                                <img src="../images/sl-2-img.jpg" alt="">
                                <div class="pro-info">
                                    <div class="pro-name">华大味道鲟鱼罐头120g</div>
                                    <div class="pro-price">
                                        <span class="current-price">¥15.9</span>
                                        <span class="old-price">¥19.9</span>
                                    </div>
                                </div>
                                <div class="pro-time">
                                    <div class="time-text">剩</div>
                                    <div class="time-hour time">26</div>
                                    <div class="time-text">时</div>
                                    <div class="time-minutes time">18</div>
                                    <div class="time-text">分</div>
                                    <div class="time-seconds time">36</div>
                                    <div class="time-text">秒</div>
                                </div>
                            </div>
                        </div>
                        <div class="swiper-slide">
                             <div class="sl sl-3">
                                <img src="../images/sl-3-img.jpg" alt="">
                                <div class="pro-info">
                                    <div class="pro-name">德国Almkind鲜榨（NFC）梨汁500ml</div>
                                    <div class="pro-price">
                                        <span class="current-price">¥19</span>
                                        <span class="old-price">¥23.8</span>
                                    </div>
                                </div>
                                <div class="pro-time">
                                    <div class="time-text">剩</div>
                                    <div class="time-hour time">26</div>
                                    <div class="time-text">时</div>
                                    <div class="time-minutes time">18</div>
                                    <div class="time-text">分</div>
                                    <div class="time-seconds time">36</div>
                                    <div class="time-text">秒</div>
                                </div>
                            </div>
                        </div>
                        <div class="swiper-slide">
                             <div class="sl sl-4">
                                <img src="../images/sl-4-img.jpg" alt="">
                                <div class="pro-info">
                                    <div class="pro-name">丽芝士纳宝帝奶酪威化饼干</div>
                                    <div class="pro-price">
                                        <span class="current-price">¥8.8</span>
                                        <span class="old-price">¥9.9</span>
                                    </div>
                                </div>
                                <div class="pro-time">
                                    <div class="time-text">剩</div>
                                    <div class="time-hour time">26</div>
                                    <div class="time-text">时</div>
                                    <div class="time-minutes time">18</div>
                                    <div class="time-text">分</div>
                                    <div class="time-seconds time">36</div>
                                    <div class="time-text">秒</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="swiper-pagination"></div>
                </div>
            </div>
            <div class="s1-left s1-right">
                <div class="s1-top">
                    <h3>新品推荐</h3>
                    <h4>品尝最新美味</h4>
                    <div class="sl-btn">
                        <div class="sl-prev sr-prev" id="sr-prev"></div>
                        <div class="sl-paginate sr-paginate" id="sr-paginate"></div>
                        <div class="sl-next sr-next" id="sr-next"></div>
                    </div>          
                </div>
                <div class="swiper-container left-swiper right-swiper" id="right-swiper">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide">
                            <img src="../images/xinpin1.jpg" alt="">
                        </div>
                        <div class="swiper-slide">
                            <img src="../images/xinpin2.jpg" alt="">
                        </div>
                        <div class="swiper-slide">
                            <img src="../images/xinpin3.jpg" alt="">
                        </div>
                    </div>
                    <div class="swiper-pagination"></div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="container goods-div clearfix">
        <div class="goods-title clearfix">
            <h2>源自天然牧场</h2>
            <a href="productlist.html" class="goods-more">查看全部商品</a>
        </div>
        <div class="goods-list clearfix">
        </div>
    </div>    
    
    <!--           footer        -->
    <div class="bottom">
    </div>

</body>

<script type="text/javascript" src="../lib/js/jquery.js"></script>
<script type="text/javascript" src="../lib/js/swiper.js"></script>
<script type="text/javascript" src="../lib/js/sweetalert.js"></script>
<script type="text/javascript" src="../js/utils.js"></script>
<script type="text/javascript" src="../js/products.js"></script>
<!-- <script type="text/javascript" src="../js/common.js"></script> -->
<script type="text/javascript" src="../js/cart.js"></script>
<script type="text/javascript" src="../js/users.js"></script>
<script type="text/javascript">


    $('.header-div').load('layouts/header.html', function(){
        $.getScript('../js/common.js', function() {
            showCartNumber();
        });
        $.getScript('../js/users.js');
    });
    
    $('.bottom').load('layouts/footer.html'); 


    // 轮播扩展
    var mainSwiper = new Swiper('.main-swiper',{
        pagination : '.swiper-pagination',
        autoplayDisableOnInteraction: false,
        autoplay: 5000,
        loop: true,
        paginationClickable: true,
    });
    var leftSwiper = new Swiper('#left-swiper',{
        loop: true,
        autoplay: 4000,
        autoplayDisableOnInteraction: false,
        prevButton:'#sl-prev',
        nextButton:'#sl-next',
        pagination : '#sl-paginate',
        paginationType : 'custom',
        paginationCustomRender: function (leftSwiper, current, total) {
            return current + ' / ' + total;
        }
    });

    var rightSwiper = new Swiper('#right-swiper',{
        loop: true,
        autoplay: 4500,
        autoplayDisableOnInteraction: false,
        prevButton:'#sr-prev',
        nextButton:'#sr-next',
        pagination : '#sr-paginate',
        paginationType : 'custom',
        paginationCustomRender: function (rightSwiper, current, total) {
            return current + ' / ' + total;
        }
    });

    // 动态获取数据
    getProjects().then((data) => {
        // console.log(data)
        var goosdList = $('.goods-list');
        goosdList.html("");
        var html = "";
        var len = Math.min(data.length, 9)
        for (var i = 0; i < len; i++) {
            var item = data[i];
            var proId = item["id"];
            var proName = item["proname"];
            var proDesc = item["prodesc"];
            var newPrice = item["new_price"];
            var oldPrice = item["old_price"];
            var proImage = item["img"];
            if (i == 0) {
                html += `
                    <div class="goods-first">
                        <a href="product.html?id=${proId}">
                            <div class="first-icon">
                                <img src="../images/icon-hot.png">
                            </div>
                            <div class="first-image">
                                <img src="${proImage}">
                            </div>
                            <div class="first-content">
                                <div class="first-title">
                                    ${proName}
                                </div>
                                <div class="first-desc">
                                    ${proDesc}
                                </div>
                        </a>
                        <div class="first-bottom clearfix">
                            <div class="first-price fl">¥${newPrice}</div>
                                <div class="old-price fl">¥${oldPrice}</div>
                                <div class="first-cart my-btn-add" onclick="addPro(${proId}, 1)">
                                </div>
                            </div>
                        </div>
                    </div>
                `
            } else {
                html += `
                    <div class="goods-item">
                        <a href="product.html?id=${proId}">
                            <div class="item-img">
                                <img src="${proImage}">
                            </div>
                            <div class="item-content">
                                <div class="item-name">${proName}</div>
                                <div class="item-text">
                                    ${proDesc}
                                </div>
                            </div>
                        </a>
                        <div class="item-price clear">
                            <div class="item-price-new fl">
                                ¥${newPrice}
                            </div>
                            <div class="item-price-old fl">
                                ¥${oldPrice}
                            </div>
                        </div>
                        <div class="item-cart my-btn-add" onclick="addPro(${proId}, 1)">
                        </div>
                    </div>
                `
            }
        }
        goosdList.html(html);
    });
    
</script>
</html>
